# 卫星信号可见性计算软件项目上下文同步

## 上下文信息更新记录
- **最后更新时间**：2025-01-09 11:00:33
- **更新阶段**：需求分析和架构设计完成
- **当前模式**：ACT MODE
- **会话ID**：20250109_001

## 项目当前状态

### 开发阶段状态
- **需求分析**：✅ 已完成
- **架构设计**：✅ 已完成
- **核心算法开发**：⏳ 待开始
- **后端服务开发**：⏳ 待开始
- **前端界面开发**：⏳ 待开始
- **系统集成测试**：⏳ 待开始
- **性能优化**：⏳ 待开始
- **文档完善**：⏳ 待开始

### 已创建的文件
1. ✅ `docs/需求文档.md` - 完整的需求规格说明文档
2. ✅ `cline.md` - 项目所有要求记录文件
3. ✅ `CLINE-activeContext.md` - 项目上下文同步信息文件（当前文件）

### 项目进度概览
- **总体进度**：13% (1/8 项主要任务完成)
- **当前阶段**：需求分析和架构设计阶段完成
- **下一阶段**：核心算法开发（TDD模式）

## 关键技术决策

### 技术栈选择
- **后端**：Node.js + Express
- **前端**：React + HTML/CSS/JavaScript
- **3D渲染**：Three.js
- **2D地图**：Leaflet
- **测试框架**：Jest + Mocha + Selenium

### 核心算法方案
- **卫星系统**：北斗B3I + GPS L1 C/A
- **遮挡计算**：基于简化几何模型
- **信号处理**：自由空间传播损耗 + 天线增益方向图 + 载噪比计算
- **坐标转换**：机体坐标系 ↔ ECEF坐标系

### 测试策略
- **开发模式**：TDD（测试驱动开发）
- **测试覆盖**：单元测试≥95%，整体≥85%
- **自动化程度**：CI/CD全自动化
- **测试场景**：起飞、巡航、着陆三个阶段

## 重要需求确认

### 卫星信号处理
- **北斗系统**：仅考虑B3I频点（1268.52MHz）
- **GPS系统**：仅考虑L1 C/A频点（1575.42MHz）
- **RINEX显示**：列表形式显示每颗卫星的所有星历参数

### 信号处理模块
- **自由空间传播损耗计算**：Lfs = 20 * log10(4 * π * d * f / c)
- **天线增益方向图模拟**：G(θ, φ) = G0 - 3 * (θ/θ3dB)^2
- **载噪比计算**：C/N0 = Pt + Gt - Lfs + Gr - k - T - Nf

### 测试场景要求
- **多场景测试**：仅保留起飞、巡航、着陆三个飞行阶段测试
- **测试自动化**：完整的CI/CD自动化测试方案
- **性能要求**：100ms更新频率，端到端响应<70ms

## 当前工作重点

### 立即需要开始的任务
1. **核心算法开发（TDD模式）**
   - 卫星位置计算算法
   - 坐标转换算法
   - 遮挡计算算法
   - 信号处理算法

2. **开发环境搭建**
   - Node.js环境配置
   - 测试框架搭建
   - CI/CD流水线配置
   - Docker环境配置

### 技术难点
- **RINEX格式解析**：支持多种RINEX版本和格式
- **实时计算性能**：100ms更新频率的性能优化
- **坐标转换精度**：高精度坐标转换算法实现
- **遮挡计算准确性**：简化几何模型的遮挡计算

## 项目约束条件

### 特殊要求
- **语言要求**：所有回答使用中文
- **文件创建**：禁止主动创建md文件和readme文件
- **开发模式**：必须采用TDD模式
- **更新频率**：100ms实时更新

### 质量要求
- **测试覆盖率**：单元测试≥95%，整体≥85%
- **性能指标**：单次计算<10ms，端到端<70ms
- **系统可靠性**：>99.9%可用性
- **数据准确性**：>99.5%准确性

## 下一步行动计划

### 短期目标（1-2周内）
1. **完成核心算法开发（TDD）**
   - 编写算法测试用例
   - 实现卫星位置计算
   - 实现坐标转换
   - 实现遮挡计算

2. **搭建开发框架**
   - 初始化项目结构
   - 配置测试环境
   - 设置CI/CD流水线
   - 创建Docker配置

### 中期目标（3-6周内）
1. **后端服务开发**
   - Express服务器搭建
   - RESTful API实现
   - WebSocket实时通信
   - RINEX文件处理

2. **前端界面开发**
   - React应用框架
   - 3D可视化组件
   - 2D地图组件
   - 用户界面实现

### 风险监控
- **技术风险**：RINEX解析复杂性、实时性能要求
- **进度风险**：算法开发难度、测试工作量
- **质量风险**：数据准确性、系统稳定性

## 重要参考信息

### 关键公式
- **自由空间传播损耗**：Lfs = 20 * log10(4 * π * d * f / c)
- **天线增益方向图**：G(θ, φ) = G0 - 3 * (θ/θ3dB)^2
- **载噪比计算**：C/N0 = Pt + Gt - Lfs + Gr - k - T - Nf

### 性能指标
- **更新频率**：100ms ± 10ms
- **计算延迟**：< 50ms
- **内存占用**：< 100MB
- **CPU使用率**：< 30%
- **网络延迟**：< 20ms

### 测试框架
- **单元测试**：Jest（前端）、Mocha + Chai（后端）
- **集成测试**：Supertest、Socket.io Client
- **端到端测试**：Selenium + WebDriverIO
- **性能测试**：Artillery、Benchmark.js

## 项目文档索引

### 主要文档
- **需求文档**：`docs/需求文档.md`
- **项目要求**：`cline.md`
- **上下文同步**：`CLINE-activeContext.md`（当前文件）

### 文档结构
```
e:/fly_cline/
├── docs/
│   └── 需求文档.md
├── cline.md
├── CLINE-activeContext.md
└── .gitignore
```

## 会议和讨论记录

### 重要决策记录
1. **技术栈选择**：Node.js + React（确认时间：2025-01-09）
2. **卫星频点**：北斗B3I + GPS L1 C/A（确认时间：2025-01-09）
3. **测试策略**：TDD模式 + 完整自动化（确认时间：2025-01-09）
4. **信号处理**：三个核心计算模块（确认时间：2025-01-09）

### 需求变更记录
- **初始需求**：完整卫星信号可见性计算系统
- **需求调整**：
  - 卫星频点简化为B3I和L1 C/A
  - 信号处理模块简化为三个核心计算
  - 测试场景简化为三个飞行阶段
  - 增加RINEX星历参数列表显示要求

## 联系和协作信息

### 项目仓库
- **GitHub地址**：https://github.com/shandianxiao218/fly_cline.git
- **当前分支**：main
- **开发模式**：功能分支开发

### 团队协作
- **开发模式**：TDD（测试驱动开发）
- **代码审查**：所有代码需要同行审查
- **文档维护**：保持文档实时更新
- **沟通语言**：中文

### 工具和环境
- **开发环境**：Node.js ≥ 16.x
- **容器化**：Docker
- **CI/CD**：GitHub Actions
- **测试框架**：Jest + Mocha + Selenium

---

## 上下文同步说明

本文件用于同步项目的上下文信息，确保所有参与者对项目状态、需求和进展有一致的理解。每次重要会议、决策或需求变更后，都需要更新此文件。

### 更新频率
- **定期更新**：每周至少更新一次
- **事件驱动**：重要决策或需求变更时立即更新
- **里程碑更新**：每个开发阶段完成时更新

### 维护责任
- **项目经理**：负责整体项目状态更新
- **技术负责人**：负责技术决策和架构更新
- **开发团队**：负责开发进度和技术细节更新

### 使用说明
- 新参与者首先阅读此文件了解项目背景
- 定期查看更新以了解最新进展
- 在重要决策前参考此文件中的约束条件
- 发现不一致时及时沟通和更新
